package in.samratc.main.arrays;

public class OddTransformation {
    /**
     * There is a joker who loves to shuffle numbers. Given a sorted integer array A and joker performs the following operations on the array A as follows:
     *
     * Split odd indices (0-based) in two parts left or right. If there are odd number of odd indices ignore middle most odd number when computing left and right
     * so that both have same number of odd numbers.
     * For every odd index in left, swap it with some odd index in right.
     * You are given an integer array A (after performing above operations) containing N distinct elements. Find the index of the value B in the array.
     * If B doesn't exists in the array, return -1.
     */
    public int solve(int[] a, int b) {
        int oldPos = sortedInsertPosOdd(a, b);
        if(a[oldPos] == b)
            return oldPos;
        int newPos = sortedInsertPosOdd(a, a[oldPos + 1]) + 1;
        return (a[newPos] == b) ? newPos: -1;
    }

    /**
     *  This method will just consider the even indices and find the the position at which the number x should be present
     */
    private int sortedInsertPosOdd(int[] arr, int x){
        int n = arr.length;
        int l = 0, r = n/2 - 1, ans = 0; // casting n to even
        while(l <= r){
            int mid = l + (r-l)/2;
            if(arr[2*mid] <= x){
                ans = 2*mid;
                l = mid + 1;
            } else
                r = mid - 1;
        }
        return ans;
    }

    //Driver
    public static void main(String... args){
        OddTransformation ot = new OddTransformation();

        System.out.println(ot.solve(new int[] {1, 6, 3, 4, 5, 2}, 5));

        System.out.println(ot.sortedInsertPosOdd(new int[] {1, 6, 3, 4, 5, 2}, 2));
        System.out.println(ot.sortedInsertPosOdd(new int[] {1, 6, 3, 4, 5, 2}, 6));
        System.out.println(ot.solve(new int[] {1, 6, 3, 4, 5, 2}, 2));


        System.out.println("\n\n"+ot.solve(new int[] {2, 7885, 4, 7976, 6, 62854, 8, 6779, 10, 81723, 12, 74163, 14, 6402, 16, 6865, 18, 67195, 20, 78318, 22, 78757, 868,
                70729, 1051, 7735, 1393, 6852, 1458, 82754, 1718, 74845, 1755, 6830, 1765, 64008, 1849, 86320, 1888, 58772, 1902, 76254, 1944, 7915, 1990, 7594,
                2005, 7250, 2041, 84584, 2060, 78109, 2088, 7639, 2121, 9648, 2192, 6344, 2215, 8198, 2266, 8768, 2287, 6573, 2334, 79931, 2354, 83767, 2370, 7526,
                2473, 66889, 2498, 75409, 2586, 90438, 2600, 71222, 2638, 7371, 2654, 85762, 2674, 6587, 2833, 8084, 2856, 62286, 2861, 70045, 2881, 8928, 2905,
                79357, 2950, 7317, 2995, 8169, 3019, 8579, 3041, 6450, 3074, 6304, 3117, 78498, 3162, 7844, 3188, 8038, 3207, 71434, 3245, 8869, 3255, 7483, 3283,
                8096, 3304, 6957, 3318, 6320, 3375, 66561, 3395, 89867, 3400, 93759, 3415, 9215, 3487, 59862, 3504, 7547, 3525, 8481, 3589, 7045, 3649, 68537, 3665,
                87034, 3676, 7053, 3685, 8593, 3702, 8722, 3720, 62661, 3723, 7629, 3740, 75217, 3760, 7113, 3800, 76596, 3867, 80301, 3922, 9141, 3932, 6634, 3942,
                8795, 3961, 6609, 3973, 83063, 3987, 7891, 3996, 73007, 4011, 8042, 4026, 7014, 4030, 77542, 4072, 7922, 4096, 6707, 4111, 6769, 4157, 81299, 4176, 6897, 4221, 6382, 4237, 82139, 4301, 70262, 4339, 64949, 4352, 73804, 4375, 65346, 4420, 72499, 4473, 7661, 4496, 76959, 4522, 7958, 4542, 60225, 4567, 8000, 4591, 7393, 4624, 81635, 4646, 9026, 4685, 6423, 4731, 8007, 4738, 6544, 4772, 84037, 4827, 56645, 4859, 7859, 4913, 74297, 4928, 88665, 4955, 6482, 4973, 7786, 5017, 68800, 5074, 63913, 5086, 69741, 5100, 7089, 5107, 61726, 5130, 75647, 5158, 7305, 5212, 77819, 5235, 8274, 5262, 66862, 5282, 6923, 5298, 8380, 5315, 66759, 5341, 8127, 5368, 8649, 5436, 7160, 5458, 7465, 5477, 9477, 5510, 83436, 5536, 55874, 5559, 81159, 5574, 88004, 5614, 6986, 5634, 67376, 5669, 79781, 5755, 64512, 5784, 8329, 5803, 7141, 5846, 7703, 5858, 7200, 5877, 69130, 5883, 68221, 5959, 7283, 6000, 6254, 6042, 8427, 6056, 57985, 6091, 91360, 6112, 7070, 6137, 7795, 6150, 65205, 6183, 64291, 6253, 6006, 6300, 3107, 6307, 3334, 6327, 2214, 6349, 4227, 6394, 15, 6409, 4724, 6437, 3055, 6468, 4959, 6504, 4754, 6551, 2306, 6578, 2699, 6602, 3967, 6614, 3936, 6668, 4099, 6734, 4143, 6773, 9, 6800, 1763, 6833, 1426, 6859, 17, 6879, 4180, 6921, 5292, 6945, 3312, 6972, 5623, 6989, 4027, 7040, 3612, 7046, 3681, 7063, 6120, 7084, 5104, 7105, 3782, 7135, 5845, 7157, 5444, 7191, 5864, 7236, 2011, 7263, 5969, 7284, 5177, 7308, 2966, 7361, 2644, 7372, 4605, 7411, 5471, 7479, 3272, 7501, 2439, 7543, 3516, 7563, 1993, 7609, 3739, 7632, 2098, 7655, 4493, 7702, 5847, 7716, 1282, 7761, 4983, 7794, 6142, 7836, 3182, 7857, 4892, 7862, 3, 7888, 3992, 7913, 1975, 7919, 4085, 7936, 4534, 7973, 5, 7988, 4570, 8006, 4736, 8023, 3191, 8040, 4017, 8079, 2836, 8092, 3293, 8102, 5354, 8138, 3008, 8171, 2264, 8269, 5242, 8328, 5788, 8368, 5302, 8397, 6054, 8456, 3575, 8495, 3026, 8589, 3689, 8617, 5433, 8696, 3709, 8761, 2277, 8786, 3951, 8847, 3251, 8888, 2901, 8998, 4667, 9028, 3931, 9144, 3457, 9255, 5509, 9614, 2152, 9725, 5553, 56330, 4843, 57786, 6085, 58643, 1889, 59211, 3498, 60121, 4563, 61689, 5120, 61874, 2859, 62431, 3722, 62751, 7, 63886, 5078, 63966, 1817, 64181, 6208, 64467, 5781, 64622, 4347, 65139, 6169, 65250, 4395, 65482, 3377, 66614, 5323, 66773, 5280, 66887, 2491, 67162, 19, 67306, 5659, 68155, 5925, 68274, 3662, 68762, 5034, 69033, 5882, 69617, 5093, 69936, 2877, 70148, 4313, 70673, 972, 70777, 2625, 71350, 3243, 71537, 4451, 72888, 4010, 73708, 4364, 74137, 13, 74231, 4915, 74548, 1734, 75094, 3750, 75342, 2532, 75442, 5133, 76036, 1924, 76390, 3859, 76858, 4514, 77295, 4069, 77731, 5231, 77900, 2081, 78164, 21, 78398, 3139, 78724, 583, 79107, 2944, 79455, 5697, 79843, 2350, 80245, 3905, 80578, 5567, 81230, 4174, 81621, 4644, 81704, 11, 81933, 4267, 82585, 1665, 82845, 3980, 83083, 5513, 83535, 2368, 83806, 4786, 84201, 2055, 84965, 2673, 86183, 1882, 86729, 3667, 87783, 5575, 88380, 4941, 89473, 3397, 90025, 2597, 91163, 6107, 92967, 3414}, 5));
    }
}

